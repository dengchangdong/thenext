(function(a){var b={init:function(){this.nav_click();this.search_click();this.back_to_top();this.load_more()},nav_click:function(){var c="nav-active";a("body").on("click",".nav-button",function(){a("body").toggleClass(c)});a("body").on("click",".overlay",function(){a("body").removeClass(c)});a(document).keyup(function(d){if(d.keyCode==27&&a("body").hasClass(c)){a("body").removeClass(c)}})},search_click:function(){var c="search-active";a("body").on("click",".search-button",function(){a("body").toggleClass(c)});a(document).keyup(function(d){if(d.keyCode==27&&a("body").hasClass(c)){a("body").removeClass(c)}})},back_to_top:function(){var c=a(".backtotop");a(window).scroll(function(){if(a(window).scrollTop()>=50){c.fadeIn()}else{c.fadeOut()}});c.click(function(){a("html,body").animate({scrollTop:0},500)})},load_more:function(){a(".pagination a").on("click",function(){a(this).addClass("loading").text("加载中");a.ajax({type:"POST",url:a(this).attr("href"),success:function(e){var c=a(e).find(".posts .post");var d=a(e).find(".pagination a").attr("href");a(".posts").append(c.fadeIn(300));a(".pagination a").removeClass("pageloading").text("查看更多");if(d!=undefined){a(".pagination a").attr("href",d)}else{a(".pagination")[0].innerHTML=""}}});return false})},};a(document).ready(function(){b.init()})})(jQuery);