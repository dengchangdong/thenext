var searchFunc=function(c,a,b){$.ajax({url:c,dataType:"xml",success:function(e){var d=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();var g=document.getElementById(a);if(!g){return}var f=document.getElementById(b);g.addEventListener("input",function(){var k='<ul class="result-list">';var i=this.value.trim().toLowerCase().split(/[\s\-]+/);f.innerHTML='<p class="result-icon"><i class="icon-search genericons"></i></p>';if(this.value.trim().length<=0){f.classList.add("no-result");return}var j=0;d.forEach(function(q){var p=true;var u=[];var v=q.title.trim().toLowerCase();var o=q.content.trim().replace(/<[^>]+>/g,"").toLowerCase();var l=q.url;var w=-1;var s=-1;var r=-1;if(v!=""&&o!=""){i.forEach(function(y,z){w=v.indexOf(y);s=o.indexOf(y);if(w<0&&s<0){p=false}else{if(s<0){s=0}if(z==0){r=s}}})}if(p){f.classList.remove("no-result");j+=1;k+="<li><a href='"+l+"'>"+v+"</a>";var t=q.content.trim().replace(/<[^>]+>/g,"");if(r>=0){var m=r-10;var n=r+20;if(m<0){m=0}if(m==0){n=30}if(n>t.length){n=t.length}var x=t.substr(m,n);i.forEach(function(y){var z=new RegExp(y,"gi");x=x.replace(z,"<em>"+y+"</em>")});k+="<p>"+x+"...</p>"}k+="</li>"}});k+="</ul>";if(j>0){if(j>1){h="共找到 "+j+" 条记录"}else{h="共找到 "+j+" 条记录"}var h='<p class="search-stats">'+h+"</p>"}else{f.classList.add("no-result");h='<p class="result-icon">没有找到内容</p>'}f.innerHTML=h+k})}})};